"use strict";(self.webpackChunkaws_cloud_operations_best_practices=self.webpackChunkaws_cloud_operations_best_practices||[]).push([[4512],{6943:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>c,contentTitle:()=>a,default:()=>u,frontMatter:()=>s,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"guides/AWS Control Tower/customizing-your-landing-zone/index","title":"Customizing your landing zone","description":"Control Tower defines a starting point for a well-governed landing zone, but most customers need to implement additional platform services for their workloads. This can include centralized networking, security services, centralized observability services and so on.","source":"@site/docs/guides/AWS Control Tower/customizing-your-landing-zone/index.md","sourceDirName":"guides/AWS Control Tower/customizing-your-landing-zone","slug":"/guides/AWS Control Tower/customizing-your-landing-zone/","permalink":"/cloud-operations-best-practices/docs/guides/AWS Control Tower/customizing-your-landing-zone/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Operating your landing zone","permalink":"/cloud-operations-best-practices/docs/guides/AWS Control Tower/operating-your-landing-zone/"},"next":{"title":"Additional considerations when enabling Control Tower in an existing AWS Organization","permalink":"/cloud-operations-best-practices/docs/guides/AWS Control Tower/control-tower-in-existing-org/"}}');var i=n(4848),r=n(8453);const s={sidebar_position:3},a="Customizing your landing zone",c={},d=[{value:"Use infrastructure as code",id:"use-infrastructure-as-code",level:2},{value:"Choose the right customization option",id:"choose-the-right-customization-option",level:2},{value:"CloudFormation StackSets",id:"cloudformation-stacksets",level:3},{value:"Account Factory Customization (AFC)",id:"account-factory-customization-afc",level:3},{value:"Customizations for AWS Control Tower (CfCT)",id:"customizations-for-aws-control-tower-cfct",level:3},{value:"Account Factory for Terraform (AFT)",id:"account-factory-for-terraform-aft",level:3},{value:"Landing Zone Accelerator (LZA)",id:"landing-zone-accelerator-lza",level:3}];function l(e){const o={a:"a",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.header,{children:(0,i.jsx)(o.h1,{id:"customizing-your-landing-zone",children:"Customizing your landing zone"})}),"\n",(0,i.jsx)(o.p,{children:"Control Tower defines a starting point for a well-governed landing zone, but most customers need to implement additional platform services for their workloads. This can include centralized networking, security services, centralized observability services and so on."}),"\n",(0,i.jsx)(o.h2,{id:"use-infrastructure-as-code",children:"Use infrastructure as code"}),"\n",(0,i.jsx)(o.p,{children:"Additional platform services should be defined and deployed using infrastructure as code (IaC), which will:"}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsx)(o.li,{children:"Ensure  identical configurations across all accounts and regions"}),"\n",(0,i.jsx)(o.li,{children:"Enable version control & change management, supporting peer review and rollback as well as ensuring all changes are recorded and auditable"}),"\n",(0,i.jsx)(o.li,{children:"support rapid, automated account provisioning where deployment can be triggered in response to Control Tower lifecycle events"}),"\n"]}),"\n",(0,i.jsx)(o.h2,{id:"choose-the-right-customization-option",children:"Choose the right customization option"}),"\n",(0,i.jsx)(o.p,{children:"Choosing the right customization approach at the beginning is crucial as it will significantly impact your operational model and flexibility going forward. The choice depends on factors such as your organization's infrastructure-as-code preferences, operational requirements, and desired level of customization flexibility.  We recommend implementing only one customization option for your landing zone."}),"\n",(0,i.jsx)(o.p,{children:"There are four main options for customizing Control Tower with code:"}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsx)(o.li,{children:"AWS Organizations StackSets"}),"\n",(0,i.jsx)(o.li,{children:"Account Factory Customization (AFC)"}),"\n",(0,i.jsx)(o.li,{children:"Customization for AWS Control Tower (CfCT)"}),"\n",(0,i.jsx)(o.li,{children:"Account Factory for Terraform (AFT)"}),"\n",(0,i.jsx)(o.li,{children:"Landing Zone Accelerator (LZA)"}),"\n"]}),"\n",(0,i.jsx)(o.h3,{id:"cloudformation-stacksets",children:"CloudFormation StackSets"}),"\n",(0,i.jsxs)(o.p,{children:["It is possible to define infrastructure resources in CloudFormation and deploy to specific accounts using the native ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/what-is-cfnstacksets.html",children:"CloudFormation StackSets"})," feature.  A StackSet lets you create stacks across regions using a single template. CloudFormation can ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-orgs-manage-auto-deployment.html",children:"automatically deploy additional stacks to new AWS Organizations accounts"})," when they're added to your target organization or organizational units (OUs), with ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/stacksets-orgs-manage-auto-deployment.html#stacksets-orgs-auto-deployment-considerations",children:"some caveats"}),"."]}),"\n",(0,i.jsx)(o.p,{children:"StackSets can be useful for deploying simple templates with minimal dependencies (and are used by Control Tower itself for deploying things like baseline IAM Roles) but the lack of CI/CD and lack of integration or awareness of Control Tower\u2019s account provisioning process is a challenge for more complex customizations."}),"\n",(0,i.jsx)(o.p,{children:"If you\u2019re looking for a managed service to deploy simple customizations in CloudFormation, consider AFC. If you\u2019re looking for a CloudFormation based solution that supports CI/CD, consider CfCT."}),"\n",(0,i.jsx)(o.h3,{id:"account-factory-customization-afc",children:"Account Factory Customization (AFC)"}),"\n",(0,i.jsxs)(o.p,{children:[(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/controltower/latest/userguide/af-customization-page.html",children:"AFC"})," is a native Control Tower feature and integrates directly with AWS Control Tower's account provisioning workflow. It allows you to define blueprints (in CloudFormation or Terraform, depending on which you are using for account provisioning) that are used to baseline an account with resources and configurations when it is provisioned."]}),"\n",(0,i.jsx)(o.p,{children:"Blueprints can be updated and versioned in Service Catalog. The Control Tower account updated process can be used to apply the updated baseline. Although you can define multiple blueprints in AFC, it is not yet possible to baseline an account with more than single blueprint. This makes it challenging to use AFC for more complex customization."}),"\n",(0,i.jsx)(o.p,{children:"Use AFC if you require straightforward customization, a single baseline per account is sufficient and you don\u2019t want to manage any resources for your customization process."}),"\n",(0,i.jsx)(o.h3,{id:"customizations-for-aws-control-tower-cfct",children:"Customizations for AWS Control Tower (CfCT)"}),"\n",(0,i.jsxs)(o.p,{children:[(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/controltower/latest/userguide/cfct-overview.html",children:"CfCT"})," is an AWS solution which implements an AWS Code Pipeline pipeline in the Control Tower management account, in the Control Tower home region. This is backed by a repository of CloudFormation templates in S3 or Github.  It supports deployment of CloudFormation templates, SCPs, and RCPs to target accounts and OUs in your Organization. CfCT does not support automation of account creation. Instead it is integrated with Control Tower\u2019s lifecycle events so customization can be automatically triggered for new accounts created through Control Tower\u2019s Account Factory."]}),"\n",(0,i.jsxs)(o.p,{children:["Use CfCT if you have in-house CloudFormation skills and are willing to maintain and ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/controltower/latest/userguide/update-stack.html",children:"update"})," the solution in your management account."]}),"\n",(0,i.jsx)(o.h3,{id:"account-factory-for-terraform-aft",children:"Account Factory for Terraform (AFT)"}),"\n",(0,i.jsxs)(o.p,{children:[(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/controltower/latest/userguide/taf-account-provisioning.html",children:"AFT"})," uses Terraform, and therefore direct AWS API calls, to manage the entire process of account creation and customization. It is an extremely flexible solution for customization but this comes at the expense of increased management overhead. Unlike CfCT, AFT can automate the entire process from account creation to account customization. It is also designed to manage the Terraform state files of the account customizations."]}),"\n",(0,i.jsx)(o.p,{children:"Also note that Control Tower Proactive controls (implemented as CloudFormation Guard rules) will not apply as resources are not being deployed using CloudFormation."}),"\n",(0,i.jsx)(o.p,{children:"Use AFT  if you have in-house Terraform skills and are experienced in setting up and maintaining Terraform state and processes, manage multiple repositories, and coordinate between different teams who might be creating and customizing accounts."}),"\n",(0,i.jsx)(o.h3,{id:"landing-zone-accelerator-lza",children:"Landing Zone Accelerator (LZA)"}),"\n",(0,i.jsxs)(o.p,{children:[(0,i.jsx)(o.a,{href:"https://aws.amazon.com/solutions/implementations/landing-zone-accelerator-on-aws/",children:"LZA"})," is an AWS solution for implementing a secure, multi-account environment based on AWS best practices and security frameworks. Although LZA doesn\u2019t require AWS Control Tower, ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/controltower/latest/userguide/about-lza.html",children:"it is recommended"})," that you use Control Tower as your foundational landing zone and implement LZA on top of it. LZA provides opinionated deployments of common landing zone functions, including security tooling and shared networking services, with limited customization available through configuration files.   This allows AWS customers with strict security and compliance requirements to configure their cloud foundations rapidly."]}),"\n",(0,i.jsx)(o.p,{children:"Use LZA if you are in a highly regulated field; need a secure and compliant landing zone deployed quickly; are comfortable with a more opinionated approach to infrastructure deployment; are willing to maintain the solution; and are prepared to understand and manage the underlying CDK code if any issues arise."}),"\n",(0,i.jsxs)(o.table,{children:[(0,i.jsx)(o.thead,{children:(0,i.jsxs)(o.tr,{children:[(0,i.jsx)(o.th,{children:"Feature"}),(0,i.jsx)(o.th,{children:"Account Factory Customization (AFC)"}),(0,i.jsx)(o.th,{children:"Customizations for AWS Control Tower (CfCT)"}),(0,i.jsx)(o.th,{children:"Account Factory for Terraform (AFT)"}),(0,i.jsx)(o.th,{children:"Landing Zone Accelerator (LZA)"})]})}),(0,i.jsxs)(o.tbody,{children:[(0,i.jsxs)(o.tr,{children:[(0,i.jsx)(o.td,{children:"Service Managed"}),(0,i.jsx)(o.td,{children:"Yes"}),(0,i.jsx)(o.td,{children:"No"}),(0,i.jsx)(o.td,{children:"No"}),(0,i.jsx)(o.td,{children:"No"})]}),(0,i.jsxs)(o.tr,{children:[(0,i.jsx)(o.td,{children:"IaC Engine"}),(0,i.jsx)(o.td,{children:"CloudFormation, Terraform"}),(0,i.jsx)(o.td,{children:"CloudFormation"}),(0,i.jsx)(o.td,{children:"Terraform"}),(0,i.jsx)(o.td,{children:"CDK"})]}),(0,i.jsxs)(o.tr,{children:[(0,i.jsx)(o.td,{children:"Deploys SCP"}),(0,i.jsx)(o.td,{children:"No"}),(0,i.jsx)(o.td,{children:"Yes"}),(0,i.jsx)(o.td,{children:"Yes"}),(0,i.jsx)(o.td,{children:"Yes"})]}),(0,i.jsxs)(o.tr,{children:[(0,i.jsx)(o.td,{children:"Supports Multiple Configuration Packages"}),(0,i.jsx)(o.td,{children:"No"}),(0,i.jsx)(o.td,{children:"Yes"}),(0,i.jsx)(o.td,{children:"Yes"}),(0,i.jsx)(o.td,{children:"Yes"})]}),(0,i.jsxs)(o.tr,{children:[(0,i.jsx)(o.td,{children:"Learning Curve"}),(0,i.jsx)(o.td,{children:"Low"}),(0,i.jsx)(o.td,{children:"Medium"}),(0,i.jsx)(o.td,{children:"High"}),(0,i.jsx)(o.td,{children:"Low"})]}),(0,i.jsxs)(o.tr,{children:[(0,i.jsx)(o.td,{children:"Operational Overhead"}),(0,i.jsx)(o.td,{children:"Low"}),(0,i.jsx)(o.td,{children:"Medium"}),(0,i.jsx)(o.td,{children:"High"}),(0,i.jsx)(o.td,{children:"Medium"})]}),(0,i.jsxs)(o.tr,{children:[(0,i.jsx)(o.td,{children:"API Support"}),(0,i.jsx)(o.td,{children:"No"}),(0,i.jsx)(o.td,{children:"Yes"}),(0,i.jsx)(o.td,{children:"Yes"}),(0,i.jsx)(o.td,{children:"Yes"})]}),(0,i.jsxs)(o.tr,{children:[(0,i.jsx)(o.td,{children:"Version Control Integration"}),(0,i.jsx)(o.td,{children:"No"}),(0,i.jsx)(o.td,{children:"Yes"}),(0,i.jsx)(o.td,{children:"Yes"}),(0,i.jsx)(o.td,{children:"Yes"})]}),(0,i.jsxs)(o.tr,{children:[(0,i.jsx)(o.td,{children:"Delegated Administration"}),(0,i.jsx)(o.td,{children:"No"}),(0,i.jsx)(o.td,{children:"No"}),(0,i.jsx)(o.td,{children:"Yes"}),(0,i.jsx)(o.td,{children:"Yes"})]}),(0,i.jsxs)(o.tr,{children:[(0,i.jsx)(o.td,{children:"Account Provisioning"}),(0,i.jsx)(o.td,{children:"Direct"}),(0,i.jsx)(o.td,{children:"Via lifecycle events only"}),(0,i.jsx)(o.td,{children:"Direct"}),(0,i.jsx)(o.td,{children:"Direct"})]}),(0,i.jsxs)(o.tr,{children:[(0,i.jsx)(o.td,{children:"Console Management"}),(0,i.jsx)(o.td,{children:"Yes"}),(0,i.jsx)(o.td,{children:"Limited"}),(0,i.jsx)(o.td,{children:"Limited"}),(0,i.jsx)(o.td,{children:"Limited"})]}),(0,i.jsxs)(o.tr,{children:[(0,i.jsx)(o.td,{children:"Deployment Complexity"}),(0,i.jsx)(o.td,{children:"Low"}),(0,i.jsx)(o.td,{children:"Medium"}),(0,i.jsx)(o.td,{children:"High"}),(0,i.jsx)(o.td,{children:"Medium"})]}),(0,i.jsxs)(o.tr,{children:[(0,i.jsx)(o.td,{children:"Customization Flexibility"}),(0,i.jsx)(o.td,{children:"Limited"}),(0,i.jsx)(o.td,{children:"High"}),(0,i.jsx)(o.td,{children:"Highest"}),(0,i.jsx)(o.td,{children:"High"})]}),(0,i.jsxs)(o.tr,{children:[(0,i.jsx)(o.td,{children:"Proactive Controls Apply"}),(0,i.jsx)(o.td,{children:"Yes"}),(0,i.jsx)(o.td,{children:"Yes"}),(0,i.jsx)(o.td,{children:"No"}),(0,i.jsx)(o.td,{children:"Yes"})]})]})]})]})}function u(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,o,n)=>{n.d(o,{R:()=>s,x:()=>a});var t=n(6540);const i={},r=t.createContext(i);function s(e){const o=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function a(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(r.Provider,{value:o},e.children)}}}]);