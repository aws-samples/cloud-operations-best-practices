"use strict";(globalThis.webpackChunkaws_cloud_operations_best_practices=globalThis.webpackChunkaws_cloud_operations_best_practices||[]).push([[421],{5735:(e,o,n)=>{n.r(o),n.d(o,{assets:()=>l,contentTitle:()=>s,default:()=>u,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"guides/AWS Control Tower/control-tower-in-existing-org/index","title":"Additional considerations when enabling Control Tower in an existing AWS Organization","description":"Control Tower Accounts","source":"@site/docs/guides/AWS Control Tower/control-tower-in-existing-org/index.md","sourceDirName":"guides/AWS Control Tower/control-tower-in-existing-org","slug":"/guides/AWS Control Tower/control-tower-in-existing-org/","permalink":"/cloud-operations-best-practices/docs/guides/AWS Control Tower/control-tower-in-existing-org/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Customizing your landing zone","permalink":"/cloud-operations-best-practices/docs/guides/AWS Control Tower/customizing-your-landing-zone/"},"next":{"title":"AWS Region Usage","permalink":"/cloud-operations-best-practices/docs/guides/AWS Region Usage/"}}');var i=n(4848),r=n(8453);const a={sidebar_position:4},s="Additional considerations when enabling Control Tower in an existing AWS Organization",l={},c=[{value:"Control Tower Accounts",id:"control-tower-accounts",level:2},{value:"Identity Center",id:"identity-center",level:2},{value:"CloudTrail",id:"cloudtrail",level:2},{value:"Config",id:"config",level:2},{value:"Backup",id:"backup",level:2},{value:"Extending governance to existing OUs and accounts",id:"extending-governance-to-existing-ous-and-accounts",level:2},{value:"Existing Controls",id:"existing-controls",level:2}];function d(e){const o={a:"a",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.header,{children:(0,i.jsx)(o.h1,{id:"additional-considerations-when-enabling-control-tower-in-an-existing-aws-organization",children:"Additional considerations when enabling Control Tower in an existing AWS Organization"})}),"\n",(0,i.jsx)(o.h2,{id:"control-tower-accounts",children:"Control Tower Accounts"}),"\n",(0,i.jsx)(o.p,{children:"Control Tower must be enabled in your AWS Organization\u2019s management account. It is not possible to have multiple landing zones in a single AWS Organization."}),"\n",(0,i.jsxs)(o.p,{children:["When you initially enable Control Tower it will not automatically enroll existing accounts in your organization, but it will create two OUs, the ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/controltower/latest/userguide/accounts.html#special-accounts",children:"shared accounts"})," and ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/controltower/latest/userguide/shared-account-resources.html",children:"resources within them"}),". Your Organization must have sufficient quota available to allow this."]}),"\n",(0,i.jsxs)(o.p,{children:["If need to ",(0,i.jsx)(o.a,{href:"https://aws.amazon.com/blogs/mt/use-existing-logging-and-security-account-with-aws-control-tower/",children:"use existing accounts"})," for log archive or audit accounts when setting up Control Tower, you can do so, but you will need to ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/cli/latest/reference/configservice/delete-configuration-recorder.html",children:"delete the config recorder"})," and ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/cli/latest/reference/configservice/delete-delivery-channel.html",children:"config delivery channel"}),".  It is generally simpler to allow Control Tower to create these accounts and to copy over historical logs as needed but in some cases, for example where you have existing log integrations with non-AWS services, it may be necessary to reuse existing accounts."]}),"\n",(0,i.jsx)(o.h2,{id:"identity-center",children:"Identity Center"}),"\n",(0,i.jsx)(o.p,{children:"We strongly recommend using AWS Identity Center with Control Tower to provide authentication for your users. If you choose not to have Control Tower manage Identity Center and you do not already have Identity Center enabled, Control Tower will not enable it and you will need to implement an alternative identity solution for your Organization."}),"\n",(0,i.jsxs)(o.p,{children:["If you do not have an existing Identity Center configured and you opt-in to Identity Center management, Control Tower will enable the service and may or may not provision groups and permission sets, ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/controltower/latest/userguide/getting-started-prereqs.html#sso-considerations",children:"depending on your choice of identity source"}),"."]}),"\n",(0,i.jsxs)(o.p,{children:["If you already have Identity Center configured, it must be in the same region as your Control Tower home region. If you opt in to Control Tower management and if you are using the local IAM Identity Center Directory, Control Tower will create users, groups and permission sets for you. If you are using any other directory ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/controltower/latest/userguide/about-extending-governance.html#sso-and-existing-orgs",children:"Control Tower will make no changes"}),"."]}),"\n",(0,i.jsx)(o.p,{children:"If you have an existing identity solution in place that uses IAM users or IAM federation you should adopt Identity Center. Enabling Control Tower & Identity Center will not have an impact on your existing IAM users, roles and policies and will not affect existing IAM SAML configuration. This will allow you to run both systems in parallel during a transition period until you are ready to remove your old IAM Users / IAM federation."}),"\n",(0,i.jsx)(o.h2,{id:"cloudtrail",children:"CloudTrail"}),"\n",(0,i.jsxs)(o.p,{children:["If you intend to enable Control Tower management of CloudTrail in an existing Organization, you will need to ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/organizations/latest/userguide/services-that-can-integrate-cloudtrail.html#integrate-disable-ta-cloudtrail",children:"disable trusted access"})," for CloudTrail to pass the AWS Control Tower ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/controltower/latest/userguide/getting-started-prereqs.html",children:"pre-flight checks"}),"."]}),"\n",(0,i.jsxs)(o.p,{children:["If you opt out of Control Tower management of CloudTrail, you will be responsible for deploying trails, centralizing logging and implementing any security measures to protect your trails. Control Tower will ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/awscloudtrail/latest/userguide/creating-trail-organization.html",children:"create an organization trail"})," regardless, but when you opt-out its status will be set to off. We recommend allowing Control Tower to manage CloudTrail for you."]}),"\n",(0,i.jsxs)(o.p,{children:["If you have an ",(0,i.jsx)(o.strong,{children:"existing Organization with account-level trails"})," and you enable CloudTrail management in Control Tower, it will create a new Organizations management trail, configured to log into a bucket in the log archive account. It will not touch your existing trails, so if they are recording you can expect to see a significant increase in CloudTrail costs across your Organization as only the first copy of management events in each region for an account is free. Stopping the account level trails from recording will prevent the extra costs."]}),"\n",(0,i.jsxs)(o.p,{children:["If you have an ",(0,i.jsx)(o.strong,{children:"existing Organization with an Organization trail"})," and you opt-in to Control Tower management, you will need to ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/organizations/latest/userguide/services-that-can-integrate-cloudtrail.html#integrate-disable-ta-cloudtrail",children:"disable trusted access"}),". When you do this, all the organization trails in your accounts will become non-functional anyway, so you should ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudtrail-turning-off-logging.html",children:"stop logging"})," for your existing trail to avoid getting billed for recording when it becomes active again. Then disable trusted access and enable Control Tower. This will result in a short period during which you do not have CloudTrail data for your organization so it needs to planned during maintenance period."]}),"\n",(0,i.jsx)(o.h2,{id:"config",children:"Config"}),"\n",(0,i.jsx)(o.p,{children:"It is not possible to opt out of Control Tower management of Config."}),"\n",(0,i.jsxs)(o.p,{children:["If you are enabling Control Tower in an existing Organization you will need to ensure ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/organizations/latest/userguide/services-that-can-integrate-config.html#integrate-disable-ta-config",children:"Trusted Access for Config is disabled"})," to pass the Control Tower ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/controltower/latest/userguide/getting-started-prereqs.html",children:"pre-launch checks"}),". Control Tower will enable trusted access during the enablement process."]}),"\n",(0,i.jsxs)(o.p,{children:["If you are planning to use existing accounts for log archive and audit accounts you will ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/controltower/latest/userguide/existing-config-resources.html",children:"need to delete all Config resources"})," from those accounts first."]}),"\n",(0,i.jsx)(o.h2,{id:"backup",children:"Backup"}),"\n",(0,i.jsxs)(o.p,{children:["The Control Tower ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/controltower/latest/userguide/backup.html",children:"AWS Backup integration"})," can help you set up a basic backup solution with a vault in each member account, a central vault in a shared account and some basic backup policies. This can be enabled at the OU level and individual resources can be tagged to target them for the relevant backup schedule."]}),"\n",(0,i.jsx)(o.p,{children:"If you already have a backup solution you can opt out of the Backup integration."}),"\n",(0,i.jsx)(o.p,{children:"The Control Tower integration does not deploy a logically air-gapped vault and does not provide configuration for cross-region backup out of the box."}),"\n",(0,i.jsx)(o.h2,{id:"extending-governance-to-existing-ous-and-accounts",children:"Extending governance to existing OUs and accounts"}),"\n",(0,i.jsxs)(o.p,{children:["Enabling Control Tower in an existing organization does not automatically extend governance over existing OUs and accounts in the Organization.  You will need to use Control Tower to ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/controltower/latest/userguide/enroll-account.html",children:"enroll existing accounts"})," to bring them under Control Governance."]}),"\n",(0,i.jsxs)(o.p,{children:["There are some ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/controltower/latest/userguide/enrollment-prerequisites.html",children:"pre-requisites"})," for accounts to be enrolled:"]}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsx)(o.li,{children:"Your landing zone must not be in a state of drift"}),"\n",(0,i.jsx)(o.li,{children:"Account must be a member of the Organization"}),"\n",(0,i.jsxs)(o.li,{children:["The ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/controltower/latest/userguide/awscontroltowerexecution.html",children:"AWSControlTowerExecution"})," role must be present and have AdministratorAccess permissions"]}),"\n",(0,i.jsxs)(o.li,{children:["Organization must have ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/organizations/latest/userguide/services-that-can-integrate-cloudformation.html",children:"StackSets trusted access enabled"})," so that the AWSControlTowerExecution role can ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/controltower/latest/userguide/enroll-account.html#what-happens-during-account-enrollment",children:"deploy Control Tower resources"})," into the account you are enrolling."]}),"\n",(0,i.jsxs)(o.li,{children:["Existing AWS Config resources should be ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/controltower/latest/userguide/enroll-account.html#example-config-cli-commands",children:"deleted"}),". If this isn\u2019t an option there is a ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/controltower/latest/userguide/existing-config-resources.html",children:"process"})," to work with customer support to enable use of existing Config resources. Not that this is not an option for existing log archive and audit accounts, which must have their Config resources deleted."]}),"\n"]}),"\n",(0,i.jsxs)(o.p,{children:["The most efficient way to bring existing AWS accounts into AWS Control Tower is to ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/controltower/latest/userguide/importing-existing.html",children:"register an entire OU"}),". When you register an OU, its member accounts are enrolled into the AWS Control Tower landing zone. The AWSControlTowerExecution role is added to accounts for you. The OU may contain up to 1000 accounts."]}),"\n",(0,i.jsx)(o.h2,{id:"existing-controls",children:"Existing Controls"}),"\n",(0,i.jsxs)(o.p,{children:["If you are enrolling existing accounts into OUs with preventative controls in place (SCP, RCPs) ensure these ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/controltower/latest/userguide/quick-account-provisioning.html#common-causes-for-enrollment-failure",children:"don\u2019t prevent provisioning or enrolment actions"}),". Alternatively, if you need these controls in place, enroll accounts into a dedicated Enrollment OU and then move them to their final destination."]}),"\n",(0,i.jsxs)(o.p,{children:["AWS Organizations has some ",(0,i.jsx)(o.a,{href:"https://docs.aws.amazon.com/organizations/latest/userguide/orgs_reference_limits.html",children:"service limits"})," you must take care not to exceed when extending governance to accounts and OUs with existing preventative controls:"]}),"\n",(0,i.jsxs)(o.ul,{children:["\n",(0,i.jsx)(o.li,{children:"Max policy size for RCPs and SCPs: 5120 characters"}),"\n",(0,i.jsx)(o.li,{children:"Max OU nesting of 5 levels"}),"\n",(0,i.jsx)(o.li,{children:"Max 5 RCPs, 5 SCPs directly attached to an OU or account"}),"\n"]}),"\n",(0,i.jsx)(o.p,{children:"For detective controls, if you have existing Config rules defined in an account, these will remain even if you delete the Config recorder in order to enroll your account. When you enroll the account to Control Tower and it creates a new recorder the rules should resume evaluation."}),"\n",(0,i.jsx)(o.p,{children:"Compliance state of config rules defined outside of Control Tower will not be visible from the Control Tower dashboard."}),"\n",(0,i.jsxs)(o.p,{children:["If you are using custom Config rules and you want to get a comprehensive view of compliance from across your whole AWS Organization, consider implementing the ",(0,i.jsx)(o.a,{href:"https://catalog.workshops.aws/awscid/en-US/dashboards/additional/config-resource-compliance-dashboard",children:"Config Resource Compliance Dashboard"})," from the ",(0,i.jsx)(o.a,{href:"https://catalog.workshops.aws/awscid/en-US",children:"Cloud Intelligence Dashboards"})," framework."]})]})}function u(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,i.jsx)(o,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,o,n)=>{n.d(o,{R:()=>a,x:()=>s});var t=n(6540);const i={},r=t.createContext(i);function a(e){const o=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function s(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),t.createElement(r.Provider,{value:o},e.children)}}}]);